(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[205],{1205:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>R});var a=t(7557),i=t(9526),r=t(2984),l=t(5383),d=t(6829),o=t(5777),n=t(6867),c=t(4606),g=t(3640),h=t(7322),m=t.n(h),x=t(6913),b=t(4333),j=t(5054);class v extends i.Component{constructor(){super(...arguments),this.handleToggle=()=>{this.props.themeAsync()}}render(){return(0,a.jsx)("button",Object.assign({className:"bg-light dark:bg-dark",onClick:this.handleToggle},{children:(0,a.jsx)(c.G,{icon:"dark"==this.props.app.theme?g.DBF:g.enB},void 0)}),void 0)}}const p=(0,r.$j)((e=>({app:e.app})),{themeAsync:x.Hb})(v);var u=t(3961);const y=document.getElementById("modal-root");class w extends i.Component{constructor(){super(...arguments),this.el=document.createElement("div")}componentDidMount(){y.appendChild(this.el)}componentWillUnmount(){y.removeChild(this.el)}render(){return(0,u.createPortal)(this.props.children,this.el)}}const k=w,f={username:"",password:""},N=n.Ry().shape({username:n.Z_().min(2,"Too Short!").max(64,"Too long!").required("Required"),password:n.Z_().min(8,"Too Short!").max(16,"Too long!").required("Required")}),O={username:"",password:"",retypePassword:""},C=n.Ry().shape({username:n.Z_().min(2,"Too Short!").max(64,"Too long!").required("Required"),password:n.Z_().min(8,"Too Short!").max(16,"Too long!").required("Required"),retypePassword:n.Z_().oneOf([n.iH("password"),null],"Password don't match!").required("Required")});class M extends i.Component{constructor(e){super(e),this.handleOpenNavbars=()=>{this.setState((e=>({openNavbars:!e.openNavbars})))},this.handleLoginForm=(e,s)=>{this.props.app.connected?j.D.emit("user:login",{username:e.username,password:e.password},(s=>{s.ok?(this.props.login({username:e.username,token:s.data?.token}),this.handleCloseLoginModal()):alert(s.msg)})):alert("not connected to the server"),s.setSubmitting(!1)},this.handleNewNews=()=>{this.props.newNewsAsync()},this.handleLoadNews=()=>{this.props.loadNewsAsync()},this.handleOpenLoginModal=()=>{this.setState({openLoginModal:!0})},this.handleCloseLoginModal=()=>{this.setState({openLoginModal:!1})},this.handleOpenRegisterModal=()=>{this.setState({openRegisterModal:!0})},this.handleCloseRegisterModal=()=>{this.setState({openRegisterModal:!1})},this.handleSwitchLogin=()=>{this.setState({openLoginModal:!0,openRegisterModal:!1})},this.handleSwitchRegister=()=>{this.setState({openLoginModal:!1,openRegisterModal:!0})},this.state={openNavbars:!1,openLoginModal:!1,openRegisterModal:!1}}render(){const{openNavbars:e,openLoginModal:s,openRegisterModal:t}=this.state,{app:{loggenIn:i},home:{news:r}}=this.props;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",Object.assign({className:"relative w-full h-screen overflow-hidden bg-gray-200 max-w-screen-2xl dark:bg-dark"},{children:(0,a.jsxs)("div",Object.assign({className:"flex items-start justify-between h-full"},{children:[(0,a.jsx)("aside",Object.assign({className:"flex-grow-0 flex-shrink-0 hidden w-20 h-full py-4 pl-4 md:w-52 md:block themed-scrollbar"},{children:(0,a.jsxs)("div",Object.assign({className:"w-full h-full rounded-lg shadow-sm bg-light dark:bg-gray-700"},{children:[(0,a.jsx)(p,{},void 0),(0,a.jsx)("button",Object.assign({onClick:this.handleNewNews},{children:"New News"}),void 0)]}),void 0)}),void 0),(0,a.jsx)("main",Object.assign({className:"flex-grow block h-full py-4 pl-4 pr-4 md:pl-6 themed-scrollbar"},{children:(0,a.jsxs)("div",Object.assign({className:"flex flex-col items-center justify-start w-full h-full"},{children:[(0,a.jsx)("div",Object.assign({className:"w-full h-14"},{children:(0,a.jsx)("div",Object.assign({className:"w-full h-full rounded-lg shadow-sm bg-light dark:bg-gray-700"},{children:(0,a.jsxs)("div",Object.assign({className:"flex items-center justify-between h-full px-4"},{children:[(0,a.jsx)("div",Object.assign({className:"p-2 bg-gray-200 rounded-lg dark:bg-gray-700"},{children:"Search ? "}),void 0),(0,a.jsxs)("div",Object.assign({className:"flex items-center"},{children:[i?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("button",{children:"Profile"},void 0)},void 0):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",Object.assign({className:"hidden px-4 py-2 mx-1 font-medium tracking-wide transition-colors rounded-lg sm:block text-light bg-primary hover:bg-primary-400 dark:bg-gray-800 dark:hover:bg-gray-600",onClick:this.handleOpenLoginModal},{children:"Login"}),void 0),(0,a.jsx)("button",Object.assign({className:"hidden px-4 py-2 mx-1 font-medium tracking-wide transition-colors rounded-lg sm:block text-light bg-primary hover:bg-primary-400 dark:bg-gray-800 dark:hover:bg-gray-600",onClick:this.handleOpenRegisterModal},{children:"Register"}),void 0)]},void 0),(0,a.jsx)("button",Object.assign({className:"flex items-center justify-center ml-4 md:hidden"},{children:(0,a.jsx)(c.G,{className:"w-6 h-6",icon:g.xiG},void 0)}),void 0)]}),void 0)]}),void 0)}),void 0)}),void 0),(0,a.jsx)("div",Object.assign({className:"w-full h-full pt-6 overflow-hidden"},{children:(0,a.jsxs)("div",Object.assign({className:"flex flex-row w-full h-full"},{children:[(0,a.jsx)("div",Object.assign({className:"flex-grow h-full pr-3 overflow-x-hidden overflow-y-auto themed-scrollbar"},{children:(0,a.jsx)(l.M,Object.assign({initial:!1},{children:r?r.map(((e,s,{length:t})=>(0,a.jsx)(d.E.div,Object.assign({layout:!0,initial:{scale:.9,opacity:.3},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:.3},className:`w-full h-40 sm:h-48 ${t==s+1?"":"mb-4"} rounded-lg shadow-sm p-0 sm:p-2 lg:p-4 bg-light dark:bg-gray-700 hover:shadow-md transition-shadow`},{children:(0,a.jsxs)("div",Object.assign({className:"flex w-full h-full text-dark dark:text-light"},{children:[(0,a.jsx)("div",Object.assign({className:"flex-grow-0 flex-shrink-0 h-full mr-3 overflow-hidden rounded-l-lg sm:rounded-lg w-36 bg-light"},{children:(0,a.jsx)("img",{className:"object-cover w-full h-full shadow-sm",src:e.thumbnail,alt:""},void 0)}),void 0),(0,a.jsxs)("div",Object.assign({className:"flex flex-col flex-grow py-2 pr-3 lg:py-0 sm:pr-1"},{children:[(0,a.jsxs)("div",Object.assign({className:"flex"},{children:[(0,a.jsx)("div",Object.assign({className:"pt-1 pr-3"},{children:(0,a.jsx)("div",Object.assign({className:"w-10 h-10 rounded-full shadow-sm"},{children:(0,a.jsx)("img",{className:"object-cover w-full h-full",src:"/favicon.ico",alt:""},void 0)}),void 0)}),void 0),(0,a.jsxs)("div",Object.assign({className:"flex-grow"},{children:[(0,a.jsx)("h5",Object.assign({className:"font-bold"},{children:e.title}),void 0),(0,a.jsx)("p",Object.assign({className:"text-sm tracking-wide"},{children:m()(e.createdAt).format("HH:mm:ss")}),void 0)]}),void 0)]}),void 0),(0,a.jsx)("div",Object.assign({className:"flex-grow my-2 ml-1 overflow-hidden"},{children:(0,a.jsx)("p",Object.assign({className:"leading-5 text-gray-600 break-words whitespace-pre-line dark:text-gray-300"},{children:e.content}),void 0)}),void 0),(0,a.jsx)("div",Object.assign({className:"flex"},{children:(0,a.jsxs)("div",Object.assign({className:"flex items-center justify-between h-10 ml-2 text-gray-400 dark:text-gray-500"},{children:[(0,a.jsx)("span",Object.assign({className:"mr-1 text-xl"},{children:e.comments?.length||0}),void 0),(0,a.jsx)(c.G,{className:"w-6 h-6",icon:g.Mzg},void 0)]}),void 0)}),void 0)]}),void 0)]}),void 0)}),e.id))):(0,a.jsx)("div",Object.assign({className:"flex items-center justify-center w-full"},{children:(0,a.jsx)(c.G,{className:"w-6 h-6 text-gray-400 animate-spin dark:text-gray-500",icon:g.LM3},void 0)}),void 0)}),void 0)}),void 0),(0,a.jsx)("div",Object.assign({className:"flex-grow-0 flex-shrink-0 hidden w-20 h-full pl-3 md:block lg:w-44"},{children:(0,a.jsx)("div",Object.assign({className:"w-full h-full rounded-lg shadow-sm bg-light dark:bg-gray-700"},{children:"Users"}),void 0)}),void 0)]}),void 0)}),void 0)]}),void 0)}),void 0)]}),void 0)}),void 0),(0,a.jsxs)(l.M,{children:[s&&(0,a.jsx)(k,{children:(0,a.jsx)(d.E.div,Object.assign({layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{delay:.2}},transition:{duration:.3},className:"fixed top-0 left-0 flex items-center justify-center w-full h-screen bg-gray-700 bg-opacity-60 dark:bg-opacity-80",onClick:e=>{e.target==e.currentTarget&&this.handleCloseLoginModal()}},{children:(0,a.jsxs)(d.E.div,Object.assign({layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1,transition:{delay:.2}},exit:{scale:.8,opacity:0},className:"relative w-full p-6 m-2 rounded-lg shadow-lg sm:h-auto bg-light sm:m-0 sm:w-96 dark:bg-dark"},{children:[(0,a.jsx)("h1",Object.assign({className:"mt-2 text-2xl font-bold text-center text-gray-800 dark:text-gray-100"},{children:"Login"}),void 0),(0,a.jsx)("button",Object.assign({className:"absolute top-3 right-3",onClick:this.handleCloseLoginModal},{children:(0,a.jsx)(c.G,{className:"w-5 h-5 text-dark hover:text-gray-700 dark:text-light dark:hover:text-gray-200",icon:g.NBC},void 0)}),void 0),(0,a.jsx)("div",Object.assign({className:"mt-6"},{children:(0,a.jsx)(o.J9,Object.assign({initialValues:f,validationSchema:N,onSubmit:this.handleLoginForm},{children:({errors:e,touched:s})=>(0,a.jsxs)(o.l0,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",Object.assign({htmlFor:"username",className:"block text-base text-gray-800 dark:text-gray-100"},{children:"Username"}),void 0),(0,a.jsx)(o.gN,{type:"text",id:"username",name:"username",className:"block w-full mt-2 border border-gray-300 rounded-lg dark:border-gray-600 text-dark dark:text-light bg-light dark:bg-dark"},void 0),e.username&&s.username&&(0,a.jsx)("div",Object.assign({className:"mt-1 text-sm font-normal text-dark dark:text-light"},{children:e.username}),void 0)]},void 0),(0,a.jsxs)("div",Object.assign({className:"mt-4"},{children:[(0,a.jsxs)("div",Object.assign({className:"flex items-center justify-between"},{children:[(0,a.jsx)("label",Object.assign({htmlFor:"password",className:"block text-base text-gray-800 dark:text-gray-100"},{children:"Password"}),void 0),(0,a.jsx)("a",Object.assign({href:"#",tabIndex:-1,className:"text-xs text-gray-600 dark:text-gray-300 hover:underline"},{children:"Forget Password ?"}),void 0)]}),void 0),(0,a.jsx)(o.gN,{type:"text",id:"password",name:"password",className:"block w-full mt-2 border border-gray-300 rounded-lg dark:border-gray-600 text-dark dark:text-light bg-light dark:bg-dark"},void 0),e.password&&s.password&&(0,a.jsx)("div",Object.assign({className:"mt-1 text-sm font-normal text-dark dark:text-light"},{children:e.password}),void 0)]}),void 0),(0,a.jsx)("div",Object.assign({className:"mt-6"},{children:(0,a.jsx)("button",Object.assign({type:"submit",className:"w-full px-4 py-2 tracking-wide transition-colors duration-200 rounded-lg bg-primary-500 text-light hover:bg-primary-400"},{children:"Login"}),void 0)}),void 0)]},void 0)}),void 0)}),void 0),(0,a.jsxs)("p",Object.assign({className:"mt-8 text-sm font-light text-center text-gray-400"},{children:["Don't have an account ?"," ",(0,a.jsx)("button",Object.assign({className:"font-medium text-gray-700 dark:text-gray-200 hover:underline",onClick:this.handleSwitchRegister},{children:"Create One"}),void 0)]}),void 0)]}),void 0)}),"login-modal")},void 0),t&&(0,a.jsx)(k,{children:(0,a.jsx)(d.E.div,Object.assign({layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{delay:.2}},transition:{duration:.3},className:"fixed top-0 left-0 flex items-center justify-center w-full h-screen bg-gray-700 bg-opacity-60 dark:bg-opacity-80",onClick:e=>{e.target==e.currentTarget&&this.handleCloseRegisterModal()}},{children:(0,a.jsxs)(d.E.div,Object.assign({layout:!0,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1,transition:{delay:.2}},exit:{scale:.8,opacity:0},className:"relative w-full p-6 m-2 rounded-lg shadow-lg sm:h-auto bg-light sm:m-0 sm:w-96 dark:bg-dark"},{children:[(0,a.jsx)("h1",Object.assign({className:"mt-2 text-2xl font-bold text-center text-gray-800 dark:text-gray-100"},{children:"Register"}),void 0),(0,a.jsx)("button",Object.assign({className:"absolute top-3 right-3",onClick:this.handleCloseRegisterModal},{children:(0,a.jsx)(c.G,{className:"w-5 h-5 text-dark hover:text-gray-700 dark:text-light dark:hover:text-gray-200",icon:g.NBC},void 0)}),void 0),(0,a.jsx)("div",Object.assign({className:"mt-6"},{children:(0,a.jsx)(o.J9,Object.assign({initialValues:O,validationSchema:C,onSubmit:(e,s)=>{alert(JSON.stringify(e,null,2)),s.setSubmitting(!1)}},{children:({errors:e,touched:s})=>(0,a.jsxs)(o.l0,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",Object.assign({htmlFor:"username",className:"block text-base text-gray-800 dark:text-gray-100"},{children:"Username"}),void 0),(0,a.jsx)(o.gN,{type:"text",id:"username",name:"username",className:"block w-full mt-2 border border-gray-300 rounded-lg dark:border-gray-600 text-dark dark:text-light bg-light dark:bg-dark"},void 0),e.username&&s.username&&(0,a.jsx)("div",Object.assign({className:"mt-1 text-sm font-normal text-dark dark:text-light"},{children:e.username}),void 0)]},void 0),(0,a.jsxs)("div",Object.assign({className:"mt-4"},{children:[(0,a.jsx)("label",Object.assign({htmlFor:"password",className:"block text-base text-gray-800 dark:text-gray-100"},{children:"Password"}),void 0),(0,a.jsx)(o.gN,{type:"text",id:"password",name:"password",className:"block w-full mt-2 border border-gray-300 rounded-lg dark:border-gray-600 text-dark dark:text-light bg-light dark:bg-dark"},void 0),e.password&&s.password&&(0,a.jsx)("div",Object.assign({className:"mt-1 text-sm font-normal text-dark dark:text-light"},{children:e.password}),void 0)]}),void 0),(0,a.jsxs)("div",Object.assign({className:"mt-4"},{children:[(0,a.jsx)("label",Object.assign({htmlFor:"retypePassword",className:"block text-base text-gray-800 dark:text-gray-100"},{children:"Retype Password"}),void 0),(0,a.jsx)(o.gN,{type:"text",id:"retypePassword",name:"retypePassword",className:"block w-full mt-2 border border-gray-300 rounded-lg dark:border-gray-600 text-dark dark:text-light bg-light dark:bg-dark"},void 0),e.retypePassword&&s.retypePassword&&(0,a.jsx)("div",Object.assign({className:"mt-1 text-sm font-normal text-dark dark:text-light"},{children:e.retypePassword}),void 0)]}),void 0),(0,a.jsx)("div",Object.assign({className:"mt-6"},{children:(0,a.jsx)("button",Object.assign({type:"submit",className:"w-full px-4 py-2 tracking-wide transition-colors duration-200 rounded-lg bg-primary-500 text-light hover:bg-primary-400"},{children:"Register"}),void 0)}),void 0)]},void 0)}),void 0)}),void 0),(0,a.jsxs)("p",Object.assign({className:"mt-8 text-sm font-light text-center text-gray-400"},{children:["Already have an account ?"," ",(0,a.jsx)("button",Object.assign({className:"font-medium text-gray-700 dark:text-gray-200 hover:underline",onClick:this.handleSwitchLogin},{children:"Login Now"}),void 0)]}),void 0)]}),void 0)}),"register-modal")},void 0)]},void 0)]},void 0)}}const R=(0,r.$j)((e=>({app:e.app,home:e.home})),{login:x.x4,register:x.z2,newNewsAsync:b.vC,loadNewsAsync:b.oU})(M)}}]);