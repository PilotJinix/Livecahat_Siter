(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[105],{6105:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>he});var i=t(7557),a=t(9526),r=t(5092),n=t(2984),d=t(6631),o=t(7942),l=t(5383),c=t(746),g=t(4606),h=t(3640),m=t(6913),x=t(4333),v=t(8251),j=t(5387);class b extends a.Component{constructor(){super(...arguments),this.handleToggle=()=>{this.props.themeAsync()}}render(){return(0,i.jsx)("button",Object.assign({className:"px-3 py-1 bg-gray-100 text-gray-600 dark:text-gray-300 rounded-lg dark:bg-gray-800",onClick:this.handleToggle},{children:(0,i.jsx)(g.G,{icon:"dark"==this.props.app.theme?h.DBF:h.enB},void 0)}),void 0)}}const u=(0,n.$j)((e=>({app:e.app})),{themeAsync:m.Hb})(b);var p=t(3961);const y=document.getElementById("modal-root");class f extends a.Component{constructor(){super(...arguments),this.el=document.createElement("div")}componentDidMount(){y.appendChild(this.el)}componentWillUnmount(){y.removeChild(this.el)}render(){return(0,p.createPortal)(this.props.children,this.el)}}const w=f,k={hidden:{opacity:.5},visible:{opacity:1,transition:{delayChildren:.1,staggerChildren:.1}}},N={hidden:{scale:.9,x:-30,opacity:.8},visible:{scale:1,x:0,opacity:1}},O={hidden:{opacity:0},visible:{opacity:1},leave:{opacity:0,transition:{delay:.2}}},C={hidden:{scale:.7,opacity:0},visible:{scale:1,opacity:1,transition:{delay:.2}},leave:{scale:.7,opacity:0}},L={hidden:{opacity:.5},visible:{opacity:1,transition:{delayChildren:.1,staggerChildren:.03}}},S={hidden:{y:-30,opacity:.5},visible:{y:0,opacity:1}};class R extends a.Component{render(){return(0,i.jsx)(c.E.div,Object.assign({variants:C,initial:"hidden",animate:"visible",exit:"leave",layout:!0,className:"relative w-full p-6 m-2 rounded-lg shadow-lg sm:h-auto bg-light sm:m-0 sm:w-96 dark:bg-dark"},{children:this.props.children}),void 0)}}const M=R;class F extends a.Component{render(){return(0,i.jsx)(c.E.div,Object.assign({variants:O,initial:"hidden",animate:"visible",exit:"leave",layout:!0,className:"fixed top-0 left-0 flex items-center justify-center w-full h-screen bg-gray-700 bg-opacity-60 dark:bg-opacity-80",onClick:e=>{e.target==e.currentTarget&&this.props.onOverlayClick()}},{children:this.props.children}),void 0)}}const T=F;var A=t(5777),_=t(6867);const G=_.Ry().shape({username:_.Z_().min(2,"Too Short!").max(64,"Too long!").required("Required"),password:_.Z_().min(8,"Too Short!").max(16,"Too long!").required("Required"),passwordConfirmation:_.Z_().oneOf([_.iH("password"),null],"Password don't match!").required("Required")});class I extends a.Component{constructor(){super(...arguments),this.initialValues={username:"",password:"",passwordConfirmation:""}}render(){return(0,i.jsx)(A.J9,Object.assign({initialValues:this.initialValues,validationSchema:G,onSubmit:this.props.onSubmit},{children:({errors:e,touched:s})=>(0,i.jsxs)(A.l0,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",Object.assign({htmlFor:"username",className:"block text-base text-gray-800 dark:text-gray-100"},{children:"Username"}),void 0),(0,i.jsx)(A.gN,{type:"text",id:"username",name:"username",className:"block w-full mt-2 border border-gray-300 rounded-lg dark:border-gray-600 text-dark dark:text-light bg-light dark:bg-dark"},void 0),e.username&&s.username&&(0,i.jsx)("div",Object.assign({className:"mt-1 text-sm font-normal text-dark dark:text-light"},{children:e.username}),void 0)]},void 0),(0,i.jsxs)("div",Object.assign({className:"mt-4"},{children:[(0,i.jsx)("label",Object.assign({htmlFor:"password",className:"block text-base text-gray-800 dark:text-gray-100"},{children:"Password"}),void 0),(0,i.jsx)(A.gN,{type:"text",id:"password",name:"password",className:"block w-full mt-2 border border-gray-300 rounded-lg dark:border-gray-600 text-dark dark:text-light bg-light dark:bg-dark"},void 0),e.password&&s.password&&(0,i.jsx)("div",Object.assign({className:"mt-1 text-sm font-normal text-dark dark:text-light"},{children:e.password}),void 0)]}),void 0),(0,i.jsxs)("div",Object.assign({className:"mt-4"},{children:[(0,i.jsx)("label",Object.assign({htmlFor:"passwordConfirmation",className:"block text-base text-gray-800 dark:text-gray-100"},{children:"Confirm Password"}),void 0),(0,i.jsx)(A.gN,{type:"text",id:"passwordConfirmation",name:"passwordConfirmation",className:"block w-full mt-2 border border-gray-300 rounded-lg dark:border-gray-600 text-dark dark:text-light bg-light dark:bg-dark"},void 0),e.passwordConfirmation&&s.passwordConfirmation&&(0,i.jsx)("div",Object.assign({className:"mt-1 text-sm font-normal text-dark dark:text-light"},{children:e.passwordConfirmation}),void 0)]}),void 0),(0,i.jsx)("div",Object.assign({className:"mt-6"},{children:(0,i.jsx)("button",Object.assign({type:"submit",className:"w-full px-4 py-2 tracking-wide transition-colors duration-200 rounded-lg bg-primary-500 text-light hover:bg-primary-400"},{children:"Register"}),void 0)}),void 0)]},void 0)}),void 0)}}const U=I,q=_.Ry().shape({username:_.Z_().min(2,"Too Short!").max(64,"Too long!").required("Required"),password:_.Z_().min(8,"Too Short!").max(16,"Too long!").required("Required")});class B extends a.Component{constructor(){super(...arguments),this.initialValues={username:"",password:""}}render(){return(0,i.jsx)(A.J9,Object.assign({initialValues:this.initialValues,validationSchema:q,onSubmit:this.props.onSubmit},{children:({errors:e,touched:s})=>(0,i.jsxs)(A.l0,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",Object.assign({htmlFor:"username",className:"block text-base text-gray-800 dark:text-gray-100"},{children:"Username"}),void 0),(0,i.jsx)(A.gN,{type:"text",id:"username",name:"username",className:"block w-full mt-2 border border-gray-300 rounded-lg dark:border-gray-600 text-dark dark:text-light bg-light dark:bg-dark"},void 0),e.username&&s.username&&(0,i.jsx)("div",Object.assign({className:"mt-1 text-sm font-normal text-dark dark:text-light"},{children:e.username}),void 0)]},void 0),(0,i.jsxs)("div",Object.assign({className:"mt-4"},{children:[(0,i.jsxs)("div",Object.assign({className:"flex items-center justify-between"},{children:[(0,i.jsx)("label",Object.assign({htmlFor:"password",className:"block text-base text-gray-800 dark:text-gray-100"},{children:"Password"}),void 0),(0,i.jsx)("a",Object.assign({href:"#",tabIndex:-1,className:"text-xs text-gray-600 dark:text-gray-300 hover:underline"},{children:"Forget Password ?"}),void 0)]}),void 0),(0,i.jsx)(A.gN,{type:"text",id:"password",name:"password",className:"block w-full mt-2 border border-gray-300 rounded-lg dark:border-gray-600 text-dark dark:text-light bg-light dark:bg-dark"},void 0),e.password&&s.password&&(0,i.jsx)("div",Object.assign({className:"mt-1 text-sm font-normal text-dark dark:text-light"},{children:e.password}),void 0)]}),void 0),(0,i.jsx)("div",Object.assign({className:"mt-6"},{children:(0,i.jsx)("button",Object.assign({type:"submit",className:"w-full px-4 py-2 tracking-wide transition-colors duration-200 rounded-lg bg-primary-500 text-light hover:bg-primary-400"},{children:"Login"}),void 0)}),void 0)]},void 0)}),void 0)}}const D=B;class E extends a.Component{render(){return(0,i.jsx)("nav",Object.assign({className:"w-full p-1"},{children:(0,i.jsx)(c.E.ul,Object.assign({variants:k,initial:"hidden",animate:"visible"},{children:this.props.children}),void 0)}),void 0)}}const $=E;var V=t(565);class z extends a.Component{render(){const{nav:e}=this.props;return(0,i.jsx)(c.E.li,Object.assign({variants:N,className:"p-2"},{children:(0,i.jsxs)(V.OL,Object.assign({className:"flex items-center justify-center px-3 py-2 text-gray-500 rounded-lg lg:justify-start dark:text-gray-400 hover:bg-primary-200 dark:hover:bg-gray-600",activeClassName:"!bg-primary dark:!bg-gray-800 hover:!bg-primary dark:hover:!bg-gray-800 !text-gray-100 dark:!text-gray-200",to:e.path,exact:e.exact},{children:[(0,i.jsx)(g.G,{className:"w-5 h-5 mx-1 md:my-1 lg:my-0",icon:e.icon},void 0),(0,i.jsx)("span",Object.assign({className:"hidden ml-1 lg:block"},{children:e.title}),void 0)]}),void 0)}),void 0)}}const H=z;class P extends a.Component{render(){return(0,i.jsx)("div",Object.assign({className:"w-full p-0 mb-3 transition-shadow rounded-lg shadow-sm h-36 sm:h-40 sm:p-3 bg-light dark:bg-gray-700 hover:shadow-md"},{children:(0,i.jsxs)("div",Object.assign({className:"flex w-full h-full text-dark dark:text-light"},{children:[(0,i.jsx)("div",{className:"flex-grow-0 flex-shrink-0 h-full mr-3 overflow-hidden bg-gray-300 rounded-l-lg sm:rounded-lg w-36 animate-pulse dark:bg-gray-600"},void 0),(0,i.jsxs)("div",Object.assign({className:"flex flex-col flex-grow py-2 pr-2 sm:py-0"},{children:[(0,i.jsxs)("div",Object.assign({className:"flex"},{children:[(0,i.jsx)("div",Object.assign({className:"pt-1 pr-3"},{children:(0,i.jsx)("div",{className:"w-8 h-8 bg-gray-300 rounded-full shadow-sm md:w-10 md:h-10 dark:bg-gray-600 animate-pulse"},void 0)}),void 0),(0,i.jsxs)("div",Object.assign({className:"flex-grow"},{children:[(0,i.jsx)("div",{className:"w-32 h-4 mt-1 mb-2 bg-gray-300 md:w-44 dark:bg-gray-600 animate-pulse"},void 0),(0,i.jsx)("div",{className:"w-20 h-3 bg-gray-300 md:w-32 dark:bg-gray-600 animate-pulse"},void 0),(0,i.jsx)("div",{},void 0)]}),void 0)]}),void 0),(0,i.jsxs)("div",Object.assign({className:"flex-grow my-2 ml-1 overflow-hidden"},{children:[(0,i.jsx)("div",{className:"w-full h-3 mb-1 bg-gray-300 dark:bg-gray-600 animate-pulse"},void 0),(0,i.jsx)("div",{className:"w-1/2 h-3 bg-gray-300 dark:bg-gray-600 animate-pulse"},void 0)]}),void 0),(0,i.jsx)("div",Object.assign({className:"flex"},{children:(0,i.jsx)("div",Object.assign({className:"flex items-center justify-between h-10 ml-2"},{children:(0,i.jsx)("div",{className:"bg-gray-300 w-7 h-7 dark:bg-gray-600 animate-pulse"},void 0)}),void 0)}),void 0)]}),void 0)]}),void 0)}),void 0)}}const W=P;class Z extends a.Component{render(){return(0,i.jsx)(c.E.div,Object.assign({variants:L,initial:"hidden",animate:"visible"},{children:this.props.children}),void 0)}}const J=Z;var X=t(7322),K=t.n(X);class Q extends a.Component{render(){const{news:e}=this.props;return(0,i.jsx)(c.E.div,Object.assign({variants:S,layout:!0,className:"w-full p-0 mb-3 transition-shadow rounded-lg shadow-sm h-36 sm:h-40 sm:p-3 bg-light dark:bg-gray-700 hover:shadow-md"},{children:(0,i.jsxs)("div",Object.assign({className:"flex w-full h-full text-dark dark:text-light"},{children:[(0,i.jsx)("div",Object.assign({className:"flex-grow-0 flex-shrink-0 h-full mr-3 overflow-hidden rounded-l-lg sm:rounded-lg w-36 bg-light"},{children:(0,i.jsx)("img",{className:"object-cover w-full h-full shadow-sm",src:e.thumbnail,alt:""},void 0)}),void 0),(0,i.jsxs)("div",Object.assign({className:"flex flex-col flex-grow py-2 pr-2 sm:py-0"},{children:[(0,i.jsxs)("div",Object.assign({className:"flex"},{children:[(0,i.jsx)("div",Object.assign({className:"pt-1 pr-3"},{children:(0,i.jsx)("div",Object.assign({className:"w-8 h-8 rounded-full shadow-sm md:w-10 md:h-10"},{children:(0,i.jsx)("img",{className:"object-cover w-full h-full",src:"/favicon.ico",alt:""},void 0)}),void 0)}),void 0),(0,i.jsxs)("div",Object.assign({className:"flex-grow"},{children:[(0,i.jsx)("h6",Object.assign({className:"font-bold leading-4 md:text-xl"},{children:(0,i.jsx)(V.rU,Object.assign({to:`/news/${e.slug}`},{children:e.title}),void 0)}),void 0),(0,i.jsx)("p",Object.assign({className:"text-sm tracking-wide text-gray-600 dark:text-gray-300"},{children:K()(e.created_at).fromNow()}),void 0)]}),void 0)]}),void 0),(0,i.jsx)("div",Object.assign({className:"flex-grow my-1 ml-1 overflow-hidden"},{children:(0,i.jsx)("p",Object.assign({className:"text-sm leading-4 text-gray-600 break-words whitespace-pre-line md:leading-5 dark:text-gray-300"},{children:e.content}),void 0)}),void 0),(0,i.jsx)("div",Object.assign({className:"flex"},{children:(0,i.jsxs)("div",Object.assign({className:"flex items-center justify-between h-6 ml-2 text-gray-400 dark:text-gray-500"},{children:[(0,i.jsx)("span",Object.assign({className:"mr-1 text-base"},{children:e.comments?.length||0}),void 0),(0,i.jsx)(g.G,{className:"w-4 h-4",icon:h.Mzg},void 0)]}),void 0)}),void 0)]}),void 0)]}),void 0)}),void 0)}}const Y=Q;class ee extends a.Component{render(){return(0,i.jsx)("div",Object.assign({className:"w-96 h-full overflow-x-hidden overflow-y-auto themed-scrollbar"},{children:this.props.children}),void 0)}}const se=ee;class te extends a.Component{render(){const{conversation:e,active:s,onClick:t}=this.props,a=e.messages?e.messages[e.messages.length-1].message:"";return(0,i.jsxs)("div",Object.assign({className:"flex w-full items-center px-6 py-2 my-2.5 rounded-md "+(s?"bg-primary dark:bg-gray-300 text-light dark:text-gray-800":"bg-light dark:bg-gray-600 dark:text-gray-400"),onClick:t},{children:[(0,i.jsx)(g.G,{className:"w-9 h-9 p-1.5 bg-gray-100 text-dark rounded-full",icon:h.ILF},void 0),(0,i.jsxs)("div",Object.assign({className:"ml-3 flex-grow w-1/2"},{children:[(0,i.jsx)("div",{children:e.title},void 0),(0,i.jsx)("div",Object.assign({className:"text-sm truncate px-1"},{children:a}),void 0)]}),void 0)]}),void 0)}}const ie=te;class ae extends a.Component{render(){return(0,i.jsx)("div",Object.assign({className:"w-96 h-full overflow-x-hidden overflow-y-auto themed-scrollbar"},{children:this.props.children}),void 0)}}const re=ae;class ne extends a.Component{render(){const{user:e,active:s,onClick:t}=this.props;return(0,i.jsxs)("div",Object.assign({className:"flex items-center px-6 py-2 my-2.5 rounded-md "+(s?"bg-primary dark:bg-gray-300 text-light dark:text-gray-800":"bg-light dark:bg-gray-600 dark:text-gray-400"),onClick:t},{children:[(0,i.jsx)(g.G,{className:"w-9 h-9 p-1.5 bg-gray-100 text-dark rounded-full",icon:h.ILF},void 0),(0,i.jsx)("div",Object.assign({className:"ml-3"},{children:e.username}),void 0)]}),void 0)}}const de=ne;class oe extends a.Component{constructor(){super(...arguments),this.state={newConversation:!1}}componentDidUpdate(e,s){e.user.id!==this.props.user.id&&this.setState({newConversation:!1})}render(){const{app:e,user:s,normalizedConversations:t,history:a}=this.props,{newConversation:r}=this.state,{user:n}=e;return(0,i.jsxs)("div",Object.assign({className:"bg-gray-50 p-4 rounded-lg"},{children:[(0,i.jsxs)("div",Object.assign({className:"flex"},{children:[(0,i.jsx)("div",Object.assign({className:"w-9 h-9 rounded-full p-1 bg-gray-200"},{children:(0,i.jsx)(g.G,{className:"w-full h-full",icon:h.ILF},void 0)}),void 0),(0,i.jsxs)("span",Object.assign({className:"ml-2"},{children:["User Card ",s.username]}),void 0)]}),void 0),(0,i.jsx)("div",Object.assign({className:"flex justify-end"},{children:(0,i.jsx)(g.G,{className:"w-6 h-6",icon:h.FU$,onClick:()=>{if(t&&s.id!==n?.id){const e=t.find((e=>{const t=e.participants?.find((e=>e.user_id==n?.id)),i=e.participants?.find((e=>e.user_id==s.id));return!(!t||!i)}));console.log(e),e?(this.props.selectConversation(e.id),a()):(this.setState({newConversation:!0}),console.log("should emit new conversation"))}}},void 0)}),void 0),(0,i.jsx)("div",{children:r&&(0,i.jsx)("div",Object.assign({className:"w-full"},{children:(0,i.jsx)("form",Object.assign({onSubmit:e=>{if(e.preventDefault(),n){const t=e.target;v.D.emit("conversation:new",{user_id:n.id,title:`${n.id}-${s.id}`,participants:[n.id,s.id],message:t.message.value},(e=>{e.ok&&(t.reset(),console.log("emit conv conversation:new ok"),a())}))}}},{children:(0,i.jsxs)("div",Object.assign({className:"flex p-2 justify-between"},{children:[(0,i.jsx)("textarea",{name:"message",className:"flex-grow rounded-lg",rows:2},void 0),(0,i.jsx)("button",Object.assign({type:"submit",className:"w-16 p-2"},{children:(0,i.jsx)(g.G,{className:"w-6 h-6 text-primary",icon:h.XCy},void 0)}),void 0)]}),void 0)}),void 0)}),void 0)},void 0)]}),void 0)}}const le=(0,n.$j)((e=>({app:e.app})),{selectConversation:x.xu})(oe),ce=[{title:"Home",path:"/",icon:h.Toy,exact:!0},{title:"Conversations",path:"/conversations",icon:h.Mzg,auth:!0},{title:"Users",path:"/users",icon:h.FVb}];class ge extends a.Component{constructor(e){super(e),this.newListContainerRef=(0,a.createRef)(),this.messageListContainerRef=(0,a.createRef)(),this.handleOpenNavbars=()=>{this.setState({openNavbars:!0})},this.handleCloseNavbars=()=>{this.setState({openNavbars:!1})},this.handleOpenLoginModal=()=>{this.setState({openLoginModal:!0})},this.handleOpenRegisterModal=()=>{this.setState({openRegisterModal:!0})},this.handleCloseLoginModal=()=>{this.setState({openLoginModal:!1})},this.handleCloseRegisterModal=()=>{this.setState({openRegisterModal:!1})},this.handleToggleSwitchAuthType=()=>{this.setState((e=>({openLoginModal:!e.openLoginModal,openRegisterModal:!e.openRegisterModal})))},this.handleOnRegisterFormSubmit=async(e,s)=>{await this.props.registerAsync(e)&&this.handleCloseRegisterModal(),s.setSubmitting(!1)},this.handleOnLoginFormSubmit=async(e,s)=>{await this.props.loginAsync(e)&&this.handleCloseLoginModal(),s.setSubmitting(!1)},this.handleOnLogoutFormSubmit=async()=>{await this.props.logoutAsync()&&window.location.reload()},this.messageListScrollToBottom=()=>{this.messageListContainerRef&&this.messageListContainerRef.current?.scrollTo({top:this.messageListContainerRef.current.scrollHeight,behavior:"smooth"})},this.state={openNavbars:!1,openLoginModal:!1,openRegisterModal:!1}}componentDidUpdate(e,s){e.home.news?.data&&e.home.news.data.length!==this.props.home.news?.data.length&&this.newListContainerRef.current?.scrollBy({top:200,behavior:"smooth"})}render(){const{openNavbars:e,openLoginModal:s,openRegisterModal:t}=this.state,{app:{user:n,loggedIn:m},home:{news:x,users:b,conversations:p},selectUser:y}=this.props,f=p?.data.map((e=>{const s=e.participants?.find((e=>e.user_id!=n?.id))?.user?.username;return{...e,title:s||e.title}}));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",Object.assign({className:"relative w-full h-screen m-auto overflow-hidden bg-gray-200 max-w-screen-2xl dark:bg-dark"},{children:(0,i.jsxs)("div",Object.assign({className:"flex items-start justify-between h-full"},{children:[(0,i.jsx)("aside",Object.assign({className:"flex-grow-0 flex-shrink-0 hidden w-20 h-full py-3 pl-3 lg:w-52 md:block themed-scrollbar"},{children:(0,i.jsxs)("div",Object.assign({className:"flex flex-col items-center w-full h-full rounded-lg shadow-sm bg-light dark:bg-gray-700"},{children:[(0,i.jsx)("div",Object.assign({className:"w-full h-20"},{children:(0,i.jsx)("div",Object.assign({className:"flex items-center justify-center w-full h-full"},{children:(0,i.jsx)("span",Object.assign({className:"text-dark dark:text-light"},{children:"AppName"}),void 0)}),void 0)}),void 0),(0,i.jsx)("div",Object.assign({className:"flex-grow w-full h-auto my-3"},{children:(0,i.jsx)($,{children:ce.map((e=>e.auth&&!m?null:(0,i.jsx)(H,{nav:e},e.path)))},void 0)}),void 0),(0,i.jsx)("div",Object.assign({className:"w-full h-20"},{children:(0,i.jsx)("div",Object.assign({className:"flex items-center justify-center w-full h-full"},{children:(0,i.jsx)(u,{},void 0)}),void 0)}),void 0)]}),void 0)}),void 0),(0,i.jsx)("main",Object.assign({className:"flex-grow block h-full py-3 pl-3 pr-3 md:pl-6 themed-scrollbar"},{children:(0,i.jsxs)("div",Object.assign({className:"flex flex-col items-center justify-start w-full h-full"},{children:[(0,i.jsx)("div",Object.assign({className:"w-full h-14"},{children:(0,i.jsx)("div",Object.assign({className:"w-full h-full rounded-lg shadow-sm bg-light dark:bg-gray-700"},{children:(0,i.jsxs)("div",Object.assign({className:"flex items-center justify-between h-full px-4"},{children:[(0,i.jsx)("div",{className:""},void 0),(0,i.jsxs)("div",Object.assign({className:"flex items-center"},{children:[m?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(d.v2,Object.assign({as:"div",className:"relative inline-block text-left"},{children:({open:e})=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:(0,i.jsxs)(d.v2.Button,Object.assign({className:"inline-flex justify-center w-full rounded-md border border-gray-300 dark:border-gray-700 shadow-sm px-4 py-2 bg-white dark:bg-gray-600 text-sm font-medium text-gray-700 dark:text-light hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 dark:focus:ring-offset-gray-600 focus:ring-gray-400 dark:focus:ring-gray-500"},{children:[n&&n.username,(0,i.jsx)(g.G,{className:"-mr-1 ml-2 h-5 w-5 text-gray-300","aria-hidden":"true",icon:h.ptq},void 0)]}),void 0)},void 0),(0,i.jsx)(d.uT,Object.assign({show:e,as:a.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95"},{children:(0,i.jsx)(d.v2.Items,Object.assign({static:!0,className:"origin-top-right absolute right-0 mt-2 w-44 rounded-md shadow-lg bg-gray-50 dark:bg-gray-700 ring-1 ring-black ring-opacity-5 focus:outline-none z-50"},{children:(0,i.jsx)("div",Object.assign({className:"py-1"},{children:(0,i.jsx)(d.v2.Item,{children:({active:e})=>(0,i.jsx)("button",Object.assign({onClick:this.handleOnLogoutFormSubmit,className:(e?"bg-gray-100 dark:bg-gray-600 text-gray-900 dark:text-gray-50":"bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-300")+"\n                        block w-full text-left px-4 py-2 text-sm"},{children:"Logout"}),void 0)},void 0)}),void 0)}),void 0)}),void 0)]},void 0)}),void 0)},void 0):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",Object.assign({className:"hidden px-4 py-2 mx-1 font-medium tracking-wide transition-colors rounded-lg sm:block text-light bg-primary hover:bg-primary-400 dark:bg-gray-800 dark:hover:bg-gray-600",onClick:this.handleOpenLoginModal},{children:"Login"}),void 0),(0,i.jsx)("button",Object.assign({className:"hidden px-4 py-2 mx-1 font-medium tracking-wide transition-colors rounded-lg sm:block text-light bg-primary hover:bg-primary-400 dark:bg-gray-800 dark:hover:bg-gray-600",onClick:this.handleOpenRegisterModal},{children:"Register"}),void 0)]},void 0),(0,i.jsx)("button",Object.assign({className:"flex items-center justify-center ml-4 sm:hidden"},{children:(0,i.jsx)(g.G,{className:"w-6 h-6 text-gray-400 dark:text-gray-500",icon:h.xiG},void 0)}),void 0)]}),void 0)]}),void 0)}),void 0)}),void 0),(0,i.jsx)("div",Object.assign({className:"w-full h-full pt-3 overflow-hidden md:pt-5"},{children:(0,i.jsx)(o.s,Object.assign({type:"crossfade"},{children:(0,i.jsxs)(r.rs,{children:[(0,i.jsx)(r.AW,{exact:!0,path:["/news/:slug","/"],render:({history:e,match:s})=>{const{slug:t}=s.params;let a;return t&&(a=x&&x.data.find((e=>e.slug===t))||this.state.news,a||j.h.post(`/news/${t}`).then((e=>{this.setState({news:e.data})})).catch((e=>{console.error(e)}))),(0,i.jsxs)("div",Object.assign({className:"w-full h-full relative"},{children:[(0,i.jsx)("div",Object.assign({ref:this.newListContainerRef,className:"w-full h-full overflow-x-hidden overflow-y-auto themed-scrollbar"},{children:x?(0,i.jsxs)(J,{children:[x.data.map((e=>(0,i.jsx)(Y,{news:e},e.id))),this.props.home.news?.meta.next_page_url&&(0,i.jsx)("div",Object.assign({className:"flex justify-center items-center"},{children:(0,i.jsx)("button",Object.assign({className:"bg-primary text-light px-4 py-2 rounded-md",onClick:()=>{this.props.loadNewsAsync()}},{children:"Load More"}),void 0)}),void 0)]},void 0):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(W,{},void 0),(0,i.jsx)(W,{},void 0),(0,i.jsx)(W,{},void 0)]},void 0)}),void 0),(0,i.jsx)(l.M,{children:t&&(0,i.jsx)(c.E.div,Object.assign({initial:{opacity:0},animate:{opacity:1,transition:{duration:.1}},exit:{opacity:0},className:"absolute p-10 top-0 left-0 w-full h-full bg-gray-800 bg-opacity-80"},{children:a?(0,i.jsxs)(c.E.div,Object.assign({initial:{opacity:0},animate:{opacity:1,transition:{delay:.1,duration:.1}},exit:{opacity:0},className:"relative w-full h-56 p-6 m-2 rounded-lg shadow-lg sm:h-auto bg-light sm:m-0 dark:bg-dark"},{children:[(0,i.jsx)("button",Object.assign({className:"absolute top-3 right-3",onClick:()=>{e.push("/")}},{children:(0,i.jsx)(g.G,{className:"w-5 h-5 text-dark hover:text-gray-700 dark:text-light dark:hover:text-gray-200",icon:h.NBC},void 0)}),void 0),(0,i.jsx)("h1",Object.assign({className:"mt-2 text-2xl font-bold text-center text-gray-800 dark:text-gray-100"},{children:a.title}),void 0),(0,i.jsx)("div",Object.assign({className:"text-xl"},{children:a.content}),void 0)]}),void 0):(0,i.jsx)("div",{children:"Loading news with spinner"},void 0)}),"item")},void 0)]}),void 0)}},void 0),(0,i.jsx)(r.AW,{path:"/users",render:({history:e})=>(0,i.jsx)("div",Object.assign({className:"flex w-full h-full relative"},{children:b?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(re,{children:b.data.map(((e,s)=>(0,i.jsx)(de,{user:e,onClick:()=>{y(s)},active:b.selectedId==s},e.id)))},void 0),(0,i.jsx)("div",Object.assign({className:"flex-grow"},{children:"number"==typeof b.selectedId?(0,i.jsx)(le,{normalizedConversations:f,user:b.data[b.selectedId],history:()=>{e.push("/conversations")}},void 0):(0,i.jsx)(i.Fragment,{},void 0)}),void 0)]},void 0):(0,i.jsx)("div",{children:"Loading User Data"},void 0)}),void 0)},void 0),(0,i.jsx)(r.AW,{path:"/conversations",render:()=>{if(!m)return(0,i.jsx)(r.l_,{to:"/"},void 0);p||this.props.loadConversationAsync();const e=f?.find((e=>e.id==p?.selectedId));return(0,i.jsxs)("div",Object.assign({className:"flex w-full h-full relative"},{children:[(0,i.jsx)(se,{children:f?(0,i.jsx)("div",{children:f.map((e=>(0,i.jsx)(ie,{conversation:e,active:e.id==p?.selectedId,onClick:()=>{this.props.selectConversation(e.id)}},e.id)))},void 0):(0,i.jsx)("div",{children:"Loading Conversation Data"},void 0)},void 0),(0,i.jsx)("div",Object.assign({className:"flex-grow w-full h-full ml-2"},{children:e?(0,i.jsxs)("div",Object.assign({className:"p-2 flex flex-col justify-between bg-light w-full h-full rounded-lg"},{children:[(0,i.jsx)("div",Object.assign({className:"border-b-2 border-primary px-2 py-4"},{children:e.title}),void 0),(0,i.jsx)("div",Object.assign({ref:this.messageListContainerRef,className:"p-2 flex-grow overflow-x-hidden overflow-y-auto themed-scrollbar"},{children:e.messages?.map((e=>{const s=e.sender_id==n?.id;return(0,i.jsx)("div",Object.assign({className:`flex ${s?"justify-end":"justify-start"} my-2`},{children:(0,i.jsxs)("div",Object.assign({className:"px-4 py-1.5 bg-primary rounded-md inline-block text-light"},{children:[(0,i.jsx)("div",Object.assign({className:"text-base w-full"},{children:e.message}),void 0),(0,i.jsx)("div",Object.assign({className:"text-xs w-full flex justify-end"},{children:K()(e.created_at).format("HH:mm")}),void 0)]}),void 0)}),e.id)}))}),void 0),(0,i.jsx)("div",Object.assign({className:"w-full"},{children:(0,i.jsx)("form",Object.assign({onSubmit:e=>{if(e.preventDefault(),n&&p&&p.selectedId){const s=e.target;s.message.value&&""!==s.message.value&&v.D.emit("message:new",{user_id:n.id,conversation_id:p.selectedId,message:s.message.value},(e=>{e.ok&&(s.reset(),this.messageListScrollToBottom())}))}}},{children:(0,i.jsxs)("div",Object.assign({className:"flex p-2 justify-between"},{children:[(0,i.jsx)("textarea",{name:"message",className:"flex-grow rounded-lg",rows:2},void 0),(0,i.jsx)("button",Object.assign({type:"submit",className:"w-16 p-2"},{children:(0,i.jsx)(g.G,{className:"w-6 h-6 text-primary",icon:h.XCy},void 0)}),void 0)]}),void 0)}),void 0)}),void 0)]}),void 0):(0,i.jsx)("div",{children:"Tidak ada pesan"},void 0)}),void 0)]}),void 0)}},void 0),(0,i.jsx)(r.AW,Object.assign({path:"*"},{children:(0,i.jsx)(r.l_,{to:"/"},void 0)}),void 0)]},void 0)}),void 0)}),void 0)]}),void 0)}),void 0)]}),void 0)}),void 0),(0,i.jsxs)(l.M,{children:[s&&(0,i.jsx)(w,{children:(0,i.jsx)(T,Object.assign({onOverlayClick:this.handleCloseLoginModal},{children:(0,i.jsxs)(M,{children:[(0,i.jsx)("h1",Object.assign({className:"mt-2 text-2xl font-bold text-center text-gray-800 dark:text-gray-100"},{children:"Login"}),void 0),(0,i.jsx)("button",Object.assign({className:"absolute top-3 right-3",onClick:this.handleCloseLoginModal},{children:(0,i.jsx)(g.G,{className:"w-5 h-5 text-dark hover:text-gray-700 dark:text-light dark:hover:text-gray-200",icon:h.NBC},void 0)}),void 0),(0,i.jsx)("div",Object.assign({className:"mt-6"},{children:(0,i.jsx)(D,{onSubmit:this.handleOnLoginFormSubmit},void 0)}),void 0),(0,i.jsxs)("p",Object.assign({className:"mt-8 text-sm font-light text-center text-gray-400"},{children:["Don't have an account ?"," ",(0,i.jsx)("button",Object.assign({className:"font-medium text-gray-700 dark:text-gray-200 hover:underline",onClick:this.handleToggleSwitchAuthType},{children:"Create One"}),void 0)]}),void 0)]},void 0)}),"login-modal")},void 0),t&&(0,i.jsx)(w,{children:(0,i.jsx)(T,Object.assign({onOverlayClick:this.handleCloseRegisterModal},{children:(0,i.jsxs)(M,{children:[(0,i.jsx)("h1",Object.assign({className:"mt-2 text-2xl font-bold text-center text-gray-800 dark:text-gray-100"},{children:"Register"}),void 0),(0,i.jsx)("button",Object.assign({className:"absolute top-3 right-3",onClick:this.handleCloseRegisterModal},{children:(0,i.jsx)(g.G,{className:"w-5 h-5 text-dark hover:text-gray-700 dark:text-light dark:hover:text-gray-200",icon:h.NBC},void 0)}),void 0),(0,i.jsx)("div",Object.assign({className:"mt-6"},{children:(0,i.jsx)(U,{onSubmit:this.handleOnRegisterFormSubmit},void 0)}),void 0),(0,i.jsxs)("p",Object.assign({className:"mt-8 text-sm font-light text-center text-gray-400"},{children:["Already have an account ?"," ",(0,i.jsx)("button",Object.assign({className:"font-medium text-gray-700 dark:text-gray-200 hover:underline",onClick:this.handleToggleSwitchAuthType},{children:"Login Now"}),void 0)]}),void 0)]},void 0)}),"register-modal")},void 0)]},void 0)]},void 0)}}const he=(0,n.$j)((e=>({app:e.app,home:e.home})),{loginAsync:m.Jz,registerAsync:m.f7,logoutAsync:m.jB,loadNewsAsync:x.oU,loadConversationAsync:x.a3,selectConversation:x.xu,selectUser:x.dy})(ge)}}]);